<!DOCTYPE html>
<html>
<head>
    <title>TV Show page</title>
</head>
<body>
    {% load static %}
    {% load Series_extras %}

    <!-- Load the CSS style sheet -->
    <link rel="stylesheet" type="text/css" href="{% static 'Series/style.css' %}" />

    <!-- Load the javascript for tabs -->
    <script type="text/javascript" src="{% static 'Series/tab.js' %}"></script>

    <!-- TV show details -->
    <h1>{{ tvshow.title }}</h1>

    <p> </p>
    <img src="{{ tvshow.poster_url }}" alt="{{ tvshow.title }}" />
    <p> </p>

    <!-- Return to library -->
    <form action="{% url 'Series:library' %}" method="GET">
        {% csrf_token %}
        <input type="submit", value="Back to library">
    </form>

{% if tvshow.seasons.all %}
    <h3>Seasons {{ season.number }}</h3>

    <!-- TV Seasons tabs -->
    <div class="tab">
        <!-- loop on seasons -->
        {% for season in tvshow.seasons.all %}
            <button class="tablinks" onclick="{{ 'openTab(event, '|addstr:season.number|addstr:')' }}">
                {{ season.number }}
            </button>
        {% endfor %}
    </div>
    
    <!-- TV Seasons tabs content -->
    {% for season in tvshow.seasons.all %}
        <div id="{{ season.number }}" class="tabcontent">
            {% if season.episodes.all %}
                <p>
                    {% for episode in season.episodes.all %}
                        <form action="{% url 'Series:seen' episode.pk %}" method="GET">
                            {% csrf_token %}
                            <!-- seen icon -->
                            {% if episode.seen %}
                                <input type="image" src="{% static 'Series/seen_icon.png' %}" alt="seen" height="9em">
                            {% else %}
                                <input type="image" src="{% static 'Series/not_seen_icon.png' %}" alt="seen" height="9em">
                            {% endif %}
                            <!-- episode number and name -->
                            &nbsp episode {{ episode.number }} - {{ episode.name }} 
                            <!-- airdate -->
                            {% if episode.airdate %}
                                - {{ episode.airdate }}
                            {% endif %}
                        </form>
                    {% endfor %}
                </p>
            {% else %}
                <p> No episodes found</p>
            {% endif %}
        </div>
    {% endfor %}
{% endif %}

</body>
</html>
